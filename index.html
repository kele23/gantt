<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Simple Gantt</title>
        <link rel="stylesheet" href="src/styles/gantt.css" />
        <script src="src/index.ts" type="module"></script>
    </head>
    <body>
        <div style="padding: 16px 16px">
            <h1>Frappe Gantt</h1>
            <hr />

            <div id="mutability"></div>
        </div>

        <script type="module">
            import Gantt from './src/index.ts';

            const rawToday = new Date();
            const today =
                Date.UTC(
                    rawToday.getFullYear(),
                    rawToday.getMonth(),
                    rawToday.getDate(),
                ) +
                new Date().getTimezoneOffset() * 60000;

            function random(begin = 10, end = 90, multiple = 10) {
                let k;
                do {
                    k = Math.floor(Math.random() * 100);
                } while (k < begin || k > end || k % multiple !== 0);
                return k;
            }

            const daysSince = (dx) => new Date(today + dx * 86400000);
            let tasks = [
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                    color: '#ff0000',
                },
                {
                    start: daysSince(3),
                    duration: '6d',
                    name: 'Filippo Didone',
                    id: 'Task 1',
                    task_group_id: 'HQ222GF',
                    color: '#880000',
                },
                {
                    start: daysSince(4),
                    duration: '2d',
                    name: 'Alerto Falezza',
                    id: 'Task 2',
                    task_group_id: 'PO765AF',
                    color: '#33ff00',
                },
                {
                    start: daysSince(-4),
                    end: daysSince(0),
                    name: 'Luca Maggiolo',
                    id: 'Task 3',
                    task_group_id: 'AB123ZF',
                },
                {
                    start: daysSince(20),
                    end: daysSince(24),
                    name: 'Daniele Righetti',
                    id: 'Task 5',
                    task_group_id: 'AB123ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                    color: '#ff0000',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
                {
                    start: daysSince(-2),
                    end: daysSince(2),
                    name: 'Michele Scala',
                    id: 'Task 0',
                    task_group_id: 'CA222ZF',
                },
            ];

            const groups = [
                {
                    id: 'CA222ZF',
                    name: 'CA222ZF',
                    thumbnail: 'https://placehold.co/48x48',
                },
                {
                    id: 'HQ222GF',
                    name: 'HQ222GF',
                    thumbnail: 'https://placehold.co/48x48',
                },
                {
                    id: 'PO765AF',
                    name: 'PO765AF',
                    thumbnail: 'https://placehold.co/48x48',
                },
                {
                    id: 'AB123ZF',
                    name: 'AB123ZF',
                    thumbnail: 'https://placehold.co/48x48',
                },
            ];

            const mutablity = new Gantt(
                '#mutability',
                tasks,
                {
                    language: 'it',
                    view_mode_select: true,
                    task_groups_enabled: true,
                    readonly: true,
                    enable_left_sidebar_list: true,
                    end_date: new Date('2025-12-01T03:24:00'),
                },
                groups,
            );

            mutablity.on('task-click', ({ task }) => {
                console.log(task.name);
            });
        </script>
    </body>
</html>
